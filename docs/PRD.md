# ETF 智能投研系统产品需求文档（PRD，面向用户前端）

## 1. 文档目标

本 PRD 以“用户在前端能直接使用与感知”为核心，要求所有功能点都能在页面可见、可操作、可反馈。

同时明确：前端所有信息必须中文展示，不允许英文混杂（专有代码如 ETF 代码除外）。

## 2. 产品目标与用户价值

- 让用户在 Web 页面完成从“数据查询 -> 基金筛选 -> 策略配置 -> 回测分析 -> 定投模拟 -> 报告导出”的完整闭环。
- 所有核心能力必须有明确入口与结果页，不依赖后端日志或命令行。
- 输出内容要“可读、可解释、可复盘”，适合普通投资者使用。

## 3. 前端功能总览（必须全部落地）

### 3.1 组合总览页（`/`）

- 展示最新回测核心指标：期末资产、累计收益率、年化收益率、最大回撤、夏普比率、波动率、胜率、总交易数。
- 展示净值曲线、回撤曲线、最近交易日志。
- 展示当前策略参数快照（中文字段名）。

### 3.2 策略回测页（`/backtest`）

- 回测参数配置：初始资金、起止日期、基准指数。
- 一键执行回测并展示：KPI 卡片、净值曲线、回撤曲线、交易日志。
- 新增“样本外验证”区域：输入训练集比例，展示训练/验证期指标与稳定性评分。
- 新增“参数敏感性分析”区域：选择参数和值区间，展示收益变化曲线与推荐区间。

### 3.3 基金筛选页（`/screening`）

- 支持按规模、费率、类别、估值分位、跟踪误差等条件筛选。
- 结果表格必须展示中文列名，并支持排序。
- 筛选结果支持一键带入策略配置（例如加入目标池）。

### 3.4 策略参数页（`/strategy`）

- 支持查看和修改策略参数（买入阈值、再平衡阈值、止盈止损、组合回撤控制等）。
- 参数更新后给出中文反馈（成功/失败原因）。
- 增加“参数合法性校验提示”（例如阈值范围错误）。

### 3.5 定投模拟页（`/dca`）

- 支持固定金额/固定份额定投。
- 展示累计投入、持仓份额、平均成本、当前市值、总收益率、分笔记录。
- 后续扩展支持分红方式切换：现金分红/红利再投资（前端需保留入口）。

### 3.6 数据查询页（`/data`）

- 支持按代码+日期范围查询 ETF 数据。
- 展示净值走势、涨跌幅、成交量明细。
- 对缺失数据、无交易日等场景给出中文提示。

## 4. 前端“全中文展示”规范（强制）

### 4.1 文案范围

以下内容必须中文：

- 页面标题、菜单、按钮、表头、提示语、错误信息、空状态、加载状态。
- 指标名称与参数名称。
- 风险提示与帮助说明。

### 4.2 允许保留英文的例外

- ETF 代码（如 `510300`）、接口路径（仅开发调试可见）、技术名词缩写（如 `PE`、`PB`）可保留，但需提供中文解释。

### 4.3 文案一致性要求

- 同一概念只允许一种中文叫法，例如“累计收益率”不能在别处写成“总收益”。
- 所有页面共用同一套中文字段映射表。

## 5. 功能与页面映射（必须可见）

- 数据源自动回退：前端显示“数据来源状态/失败切换提示”。
- 周度全量校验：前端显示“最近校验时间、结果状态”。
- 买入/加仓/止盈/止损/强制减仓：前端交易日志必须可见触发原因。
- 组合风控（暂停加仓、强制减仓、现金仓位约束）：前端需有风控状态区。
- 样本外验证与敏感性分析：必须在回测页有独立可操作模块。
- 缓存命中与刷新：前端可提供“刷新数据”按钮与时间戳提示。

## 6. 交互与反馈要求

- 关键操作必须有三态反馈：加载中、成功、失败。
- 失败提示必须可理解，告诉用户“为什么失败、下一步怎么办”。
- 长耗时任务（回测、敏感性分析）必须显示进度或状态提示。

## 7. 非功能要求（用户视角）

- 首次进入核心页面加载时间目标：3 秒内可交互。
- 图表和表格在桌面与移动端可正常浏览。
- 表单输入有前端校验，避免提交后才报错。

## 8. 验收标准（以用户可见为准）

### 8.1 功能验收

- 每个功能点在前端都有入口、可触发、可展示结果。
- 用户无需看日志和接口响应原文即可完成主要操作。

### 8.2 中文验收

- 全站抽检：页面内用户可见文本中文覆盖率 100%。
- 不出现英文按钮文案、英文错误提示、英文空状态。

### 8.3 一致性验收

- 各页面指标名称一致。
- 相同接口返回信息在不同页面展示口径一致。

## 9. 实施优先级（前端导向）

### P0（立即）

- 回测页补齐“样本外验证 + 参数敏感性分析”完整可视化模块。
- 首页与回测页补齐风控状态与策略行为解释。
- 全站中文文案统一改造。

### P1（次优先）

- 筛选页、策略页、定投页增强联动（筛选结果带入策略、策略参数回写提示）。
- 增加导出能力入口（报告导出、结果下载）。

### P2（增强）

- 个性化仪表板、用户偏好保存、操作引导与帮助中心。
